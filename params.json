{"name":"Haroo-api","tagline":"haroo cloud api stack","body":"haroo-api\r\n=========\r\n\r\nharoo-api for haroo cloud service\r\n\r\n- nodejs\r\n- restify\r\n- database bind\r\n    - mongo : mongoose\r\n    - couch : nano\r\n    - mysql : sequelize\r\n\r\nrefer. `package.json` more.\r\n\r\n## Usage\r\n\r\nshould to ready mongo, couch and mysql database\r\n\r\ninstall modules\r\n\r\n> npm install\r\n\r\n> npm test\r\n\r\n> npm start\r\n\r\n### Run App by MODE\r\n\r\n> NODE_ENV=development nodemon app\r\n\r\nor\r\n\r\n> NODE_ENV=production pm2 start app.js --name \"core\"\r\n\r\n\r\n## APIs list\r\n\r\n### No Access Token Required\r\n\r\n#### Account\r\n\r\n##### 1. `POST` /api/account/create\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/account/create\r\n\r\n```json\r\n{ \"email\": \"test@gmail.com\", \"password\": \"password\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"email\": \"soomtong@gmail.com\",\r\n        \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n        \"profile\": {\"gender\": \"\", \"location\": \"\", \"website\": \"\", \"picture\": \"\"},\r\n        \"db_host\": \"db1.haroopress.com\",\r\n        \"access_host\": \"sven-mac-pro\",\r\n        \"access_token\": \"29478ae2-4c19-457e-aaac-74fef36d208e\",\r\n        \"login_expire\": \"1422973044455\",\r\n        \"tokens\": []\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n**Receive - exist**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: already exist\",\r\n    \"data\": {\r\n        \"email\": \"soomtong@gmail.com\",\r\n        \"password\": \"password\",\r\n        \"accessHost\": \"sven-mac-pro\",\r\n        \"accessIP\": \"localhost\",\r\n        \"database\": \"db1.haroopress.com\"\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"already exist\"}\r\n}\r\n```\r\n\r\n##### 2. `POST` /api/account/login\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/account/login\r\n\r\n```json\r\n{ \"email\": \"test@gmail.com\", \"password\": \"password\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"email\": \"soomtong@gmail.com\",\r\n        \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n        \"profile\": {\"nickname\": \"\", \"gender\": \"\", \"location\": \"\", \"website\": \"\", \"picture\": \"\"},\r\n        \"db_host\": \"db1.haroopress.com\",\r\n        \"access_host\": \"sven-mac-pro\",\r\n        \"access_token\": \"621d08ca-1b2c-4e8b-b543-89e85e88fbf2\",\r\n        \"login_expire\": \"1422973462420\",\r\n        \"tokens\": []\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n**Receive - invalid**\r\n\r\n```json\r\n{\r\n    \"message\": \"Unauthorized: none exist\",\r\n    \"data\": {\r\n        \"email\": \"test@gmail.com\",\r\n        \"password\": \"wrong-password\",\r\n        \"accessHost\": \"sven-mac-pro\",\r\n        \"accessIP\": \"localhost\"\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 401,\r\n    \"meta\": {\"error\": \"Unauthorized\", \"message\": \"none exist\"}\r\n}\r\n```\r\n\r\n##### 3. `POST` /api/account/forgot-password\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/account/forgot_password\r\n\r\n```json\r\n{ \"email\": \"test@gmail.com\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"email\": \"test@gmail.com\",\r\n        \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n        \"profile\": {\"nickname\": \"\", \"gender\": \"\", \"location\": \"\", \"website\": \"\", \"picture\": \"\"},\r\n        \"db_host\": \"db1.haroopress.com\",\r\n        \"tokens\": []\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n**Receive - invalid**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: can't find information\",\r\n    \"data\": {\r\n        \"email\": \"wrong-id@gmail.com\",\r\n        \"accessIP\": \"localhost\"\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"can't find information\"}\r\n}\r\n```\r\n\r\n### Access Token Required in Request Header with `X-Access-Token`\r\n\r\n#### Common\r\n\r\n##### 1. `POST` /api/token/validate\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/token/validate\r\n\r\n```json\r\n{ \"X-Access-Token\": \"dcbba695-fd91-45f0-987e-1311d8b4b6ca\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"accessToken\": \"dcbba695-fd91-45f0-987e-1311d8b4b6ca\",\r\n        \"accessHost\": \"sven-mac-pro\",\r\n        \"accessIP\": \"localhost\"\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n**Receive - invalid**\r\n\r\n```json\r\n{\r\n    \"message\": \"Bad Request: access deny\",\r\n    \"data\": {\r\n        \"accessToken\": \"wrong-dcbba695-fd91-45f0-987e-1311d8b4b6ca\",\r\n        \"accessHost\": \"sven-mac-pro\",\r\n        \"accessIP\": \"localhost\"\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 400,\r\n    \"meta\": {\"error\": \"Bad Request\", \"message\": \"access deny\"}\r\n}\r\n```\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/token/validate\r\n\r\n```json\r\n{ \"X-Access-Token\": \"dcbba695-fd91-45f0-987e-1311d8b4b6ca\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n{ \"keep\": \"1\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: kept one more\",\r\n    \"data\": {\r\n        \"keepToken\": \"1\",\r\n        \"accessToken\": \"dcbba695-fd91-45f0-987e-1311d8b4b6ca\",\r\n        \"accessHost\": \"sven-mac-pro\",\r\n        \"accessIP\": \"localhost\"\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"kept one more\"}\r\n}\r\n```\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/token/validate\r\n\r\n```json\r\n{ \"X-Access-Token\": \"dcbba695-fd91-45f0-987e-1311d8b4b6ca\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n{ \"keep\": \"0\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"keepToken\": \"0\",\r\n        \"accessToken\": \"0d82f030-8cc1-4c42-a3cf-1938faf40b5b\",\r\n        \"accessHost\": \"sven-mac-pro\",\r\n        \"accessIP\": \"localhost\"\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n##### 2. `POST` /api/spec/version\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/spec/version\r\n\r\n```json\r\n{ \"X-Access-Token\": \"dcbba695-fd91-45f0-987e-1311d8b4b6ca\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: api version\",\r\n    \"data\": {\"ver\": \"0.0.1\", \"released\": \"2015-02-28T15:00:00.000Z\"},\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"api version\"}\r\n}\r\n```\r\n\r\n#### User\r\n\r\n##### 1. `POST` /api/user/:haroo_id/info\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/user/b4c4ae0692b435427b671649ea30848e7/info\r\n\r\n```json\r\n{ \"X-Access-Token\": \"8091cc47-ca6e-451e-b91a-b7797aa8a94e\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"email\": \"test@gmail.com\",\r\n        \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n        \"profile\": {\"nickname\": \"\", \"gender\": \"\", \"location\": \"\", \"website\": \"\", \"picture\": \"\"},\r\n        \"db_host\": \"db1.haroopress.com\",\r\n        \"access_host\": \"sven-mac-pro\",\r\n        \"access_token\": \"8091cc47-ca6e-451e-b91a-b7797aa8a94e\",\r\n        \"login_expire\": \"1422975245862\",\r\n        \"tokens\": []\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n**Receive - invalid**\r\n\r\n```json\r\n{\r\n    \"message\": \"Bad Request: access deny\",\r\n    \"data\": {\r\n        \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n        \"accessToken\": \"976ca623-349b-4a3f-91ee-0e3933cca3fd\",\r\n        \"accessHost\": \"sven-mac-pro\",\r\n        \"accessIP\": \"localhost\"\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 400,\r\n    \"meta\": {\"error\": \"Bad Request\", \"message\": \"access deny\"}\r\n}\r\n```\r\n\r\n##### 2. `POST` /api/user/:haroo_id/change_password\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/user/b4c4ae0692b435427b671649ea30848e7/change_password\r\n\r\n```json\r\n{ \"X-Access-Token\": \"8091cc47-ca6e-451e-b91a-b7797aa8a94e\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n{ \"email\": \"test@gmail.com\", \"password\": \"password\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"email\": \"test@gmail.com\",\r\n        \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n        \"profile\": {\"nickname\": \"\", \"gender\": \"\", \"location\": \"\", \"website\": \"\", \"picture\": \"\"},\r\n        \"db_host\": \"db1.haroopress.com\",\r\n        \"access_host\": \"sven-mac-pro\",\r\n        \"access_token\": \"8091cc47-ca6e-451e-b91a-b7797aa8a94e\",\r\n        \"login_expire\": \"1422975245862\",\r\n        \"tokens\": []\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n##### 3. `POST` /api/user/:haroo_id/update_info\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/user/b4c4ae0692b435427b671649ea30848e7/update_info\r\n\r\n```json\r\n{ \"X-Access-Token\": \"8091cc47-ca6e-451e-b91a-b7797aa8a94e\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n{ \"email\": \"test@gmail.com\", \"nickname\": \"screenName\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"email\": \"test@gmail.com\",\r\n        \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n        \"profile\": {\"nickname\": \"screenName\", \"gender\": \"\", \"location\": \"\", \"website\": \"\", \"picture\": \"\"},\r\n        \"db_host\": \"db1.haroopress.com\",\r\n        \"access_host\": \"sven-mac-pro\",\r\n        \"access_token\": \"8091cc47-ca6e-451e-b91a-b7797aa8a94e\",\r\n        \"login_expire\": \"1422975245862\",\r\n        \"tokens\": []\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n##### 4. `POST` /api/user/:haroo_id/logout\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/user/b4c4ae0692b435427b671649ea30848e7/logout\r\n\r\n```json\r\n{ \"X-Access-Token\": \"8091cc47-ca6e-451e-b91a-b7797aa8a94e\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n{ \"email\": \"test@gmail.com\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"email\": \"test@gmail.com\",\r\n        \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n        \"profile\": {\"nickname\": \"screenName\", \"gender\": \"\", \"location\": \"\", \"website\": \"\", \"picture\": \"\"},\r\n        \"db_host\": \"db1.haroopress.com\",\r\n        \"access_host\": \"sven-mac-pro\",\r\n        \"access_token\": \"8091cc47-ca6e-451e-b91a-b7797aa8a94e\",\r\n        \"login_expire\": \"1422975245862\",\r\n        \"tokens\": []\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n##### 5. `POST` /api/user/:haroo_id/delete\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/spec/version\r\n\r\n```json\r\n{ \"X-Access-Token\": \"ac4ca287-55d9-4aa1-837b-f3cb85f27278\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n{ \"email\": \"test@gmail.com\", \"password\": \"password\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    \"message\": \"OK: done\",\r\n    \"data\": {\r\n        \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n        \"email\": \"test@gmail.com\",\r\n        \"password\": \"password\",\r\n        \"clientToken\": {\r\n            \"_id\": \"54bd1da48e1b0eeb0ee4c400\",\r\n            \"access_ip\": \"localhost\",\r\n            \"access_host\": \"sven-mac-pro\",\r\n            \"access_token\": \"ac4ca287-55d9-4aa1-837b-f3cb85f27278\",\r\n            \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\",\r\n            \"login_expire\": \"1422976036114\",\r\n            \"created_at\": \"2015-01-19T15:07:16.114Z\",\r\n            \"__v\": 0\r\n        },\r\n        \"accessHost\": \"sven-mac-pro\",\r\n        \"accessIP\": \"localhost\"\r\n    },\r\n    \"isResult\": true,\r\n    \"statusCode\": 200,\r\n    \"meta\": {\"error\": \"OK\", \"message\": \"done\"}\r\n}\r\n```\r\n\r\n#### Document\r\n\r\n##### 1. `POST` /api/document/:document_id/public\r\n\r\n**Send**\r\n\r\n> localhost:3030/api/document/1A99E3B9-B6DE-7D2B-B394-0A47E4FD9419/public\r\n\r\n```json\r\n{ \"X-Access-Token\": \"8091cc47-ca6e-451e-b91a-b7797aa8a94e\", \"X-Access-Host\": \"sven-mac-pro\" }\r\n{ \"haroo_id\": \"b4c4ae0692b435427b671649ea30848e7\" }\r\n```\r\n\r\n**Receive - done**\r\n\r\n```json\r\n{\r\n    // not yet\r\n}\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}